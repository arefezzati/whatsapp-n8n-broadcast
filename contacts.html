<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; media-src 'self' blob:; connect-src 'self';">
    <title>WhatsApp KiÅŸi YÃ¶netimi</title>
    <link rel="stylesheet" href="/assets/css/contacts.css?v=6">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <a href="/" class="btn btn-back">â¬…ï¸ Ana Sayfa</a>
                </div>
                <div class="header-center">
                    <h1>ğŸ“± WhatsApp KiÅŸi YÃ¶netimi</h1>
                    <p>KiÅŸilerinizi organize edin ve WhatsApp'a aktarÄ±n</p>
                </div>
                <div class="header-right">
                    <a href="/monitor" class="btn btn-monitor">ğŸ“Š MonitÃ¶r</a>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="navigation">
            <a href="/" class="nav-link">ğŸ  Ana Sayfa</a>
            <a href="/contacts" class="nav-link active">ğŸ“± KiÅŸiler</a>
            <a href="/groups" class="nav-link">ğŸ‘¥ Gruplar</a>
        </nav>

        <!-- Kontrol Paneli -->
        <section class="controls">
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” KiÅŸi, telefon veya Ã¼lke ara...">
            </div>

            <div class="filter-group">
                <label class="filter-label">Filtre:</label>
                <label class="radio-label">
                    <input type="radio" name="contactFilter" value="all" checked>
                    <span>ğŸ“‹ TÃ¼mÃ¼</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="contactFilter" value="selected">
                    <span>âœ… SeÃ§ililer</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="contactFilter" value="unselected">
                    <span>â­• SeÃ§ili Olmayanlar</span>
                </label>
            </div>

            <button class="btn btn-primary" id="addContactBtn">
                â• Yeni KiÅŸi
            </button>

            <button class="btn btn-secondary" id="importWhatsAppBtn">
                ğŸ“¥ WhatsApp'tan Ä°Ã§e Aktar
            </button>

            <button class="btn btn-success" id="selectAllBtn">
                âœ… TÃ¼mÃ¼nÃ¼ SeÃ§
            </button>

            <button class="btn btn-secondary" id="deselectAllBtn">
                âŒ SeÃ§imi KaldÄ±r
            </button>

            <button class="btn btn-success" id="saveListBtn">
                ğŸ’¾ Listeyi Kaydet
            </button>

            <button class="btn btn-primary" id="sendVideoBtn" style="display: none;">
                ğŸ“¹ Video GÃ¶nder
            </button>

            <a href="/monitor" class="btn btn-info">
                ğŸ“Š Sistem MonitÃ¶rÃ¼
            </a>

            <button class="btn btn-danger" id="clearListBtn">
                ğŸ—‘ï¸ Listeyi Temizle
            </button>
        </section>

        <!-- Yeni KiÅŸi Ekleme Formu -->
        <section class="form-section" id="addContactForm">
            <h3>ğŸ“ Yeni KiÅŸi Ekle</h3>

            <div class="form-row">
                <div class="form-group">
                    <label for="contactName">Ad Soyad</label>
                    <input type="text" id="contactName" class="form-control" placeholder="Ã–rn: Ahmet YÄ±lmaz">
                </div>

                <div class="form-group">
                    <label for="contactPhone">Telefon NumarasÄ±</label>
                    <input type="tel" id="contactPhone" class="form-control" placeholder="Ã–rn: 905551234567">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="contactCountry">Ãœlke</label>
                    <select id="contactCountry" class="form-control">
                        <option value="TR">ğŸ‡¹ğŸ‡· TÃ¼rkiye (+90)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="contactLanguage">Dil</label>
                    <select id="contactLanguage" class="form-control">
                        <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
                        <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                        <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                        <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group" style="width: 100%;">
                    <label for="contactMessage">WhatsApp KarÅŸÄ±lama MesajÄ± *</label>
                    <textarea id="contactMessage" class="form-control" rows="3"
                              placeholder="Ã–rn: Merhaba! Size Ã¶zel videolarÄ±mÄ±zÄ± gÃ¶ndereceÄŸiz..."
                              required></textarea>
                    <small class="form-text text-muted">Bu mesaj kiÅŸi WhatsApp'a eklenirken otomatik gÃ¶nderilecek</small>
                </div>
            </div>

            <div class="form-row">
                <button class="btn btn-success" id="saveContactBtn">
                    âœ… Kaydet
                </button>
                <button class="btn btn-secondary" id="cancelAddBtn">
                    âŒ Ä°ptal
                </button>
            </div>
        </section>

        <!-- Video GÃ¶nderim Formu -->
        <!-- Video GÃ¶nderim Formu (GÄ°ZLENDÄ° - NGROK MULTIPART SORUNU) -->
        <section class="form-section" id="sendVideoForm" style="display: none;">
            <h3>ğŸ“¹ Video GÃ¶nderim</h3>

            <!-- Video Upload Area -->
            <div class="form-row">
                <div class="form-group">
                    <label>Video DosyalarÄ± (Max 5 adet, Toplam 50MB):</label>
                    <div class="video-upload-area" id="videoUploadArea">
                        <div class="upload-zone" id="uploadZone">
                            <div class="upload-icon">ğŸ“¹</div>
                            <div class="upload-text">
                                <strong>VideolarÄ± buraya sÃ¼rÃ¼kleyin</strong>
                                <br>veya <span class="browse-link">dosya seÃ§in</span>
                            </div>
                            <input type="file" id="videoFiles" multiple accept="video/*" style="display: none;">
                            <div class="upload-info">
                                MP4, MOV, AVI, MKV formatlarÄ± desteklenir
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Video Previews Grid -->
            <div class="video-previews" id="videoPreviews" style="display: none;">
                <div class="previews-header">
                    <h4>ğŸ“‹ SeÃ§ilen Videolar</h4>
                    <div class="upload-stats">
                        <span id="videoCount">0/5 video</span>
                        <span id="totalSize">0/50 MB</span>
                    </div>
                </div>
                <div class="video-grid" id="videoGrid">
                    <!-- Video previews ve caption inputlarÄ± buraya gelecek -->
                </div>
            </div>

            <!-- ESKÄ° TEK CAPTION INPUT KALDIRILDI - ArtÄ±k her videonun kendi caption'Ä± var -->

            <div class="form-row">
                <button class="btn btn-success" id="sendVideoNowBtn">
                    ğŸš€ SeÃ§ili KiÅŸilere GÃ¶nder
                </button>
                <button class="btn btn-secondary" id="cancelVideoBtn">
                    âŒ Ä°ptal
                </button>
            </div>

            <div class="send-progress" id="sendProgress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">GÃ¶nderiliyor...</div>
            </div>
        </section>

        <!-- Ä°statistikler -->
        <section class="controls">
            <div class="stats">
                <span>ğŸ“Š Toplam: <strong id="totalCount">0</strong> kiÅŸi</span>
                <span>âœ… SeÃ§ili: <strong id="selectedCount">0</strong> kiÅŸi</span>
            </div>
        </section>

        <!-- KiÅŸi Listesi -->
        <section class="contacts-section">
            <h3>ğŸ‘¥ KiÅŸi Listesi</h3>
            <div id="contactsList" class="contacts-list">
                <!-- KiÅŸiler buraya yÃ¼klenecek -->
            </div>
        </section>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>KiÅŸiler yÃ¼kleniyor...</p>
        </div>
    </div>

    <!-- Toast Bildirimi -->
    <div id="toast" class="toast">
        <span id="toastMessage">Bildirim mesajÄ±</span>
    </div>

    <!-- JavaScript -->
    <script src="/assets/js/contacts.js?v=6"></script>
</body>
</html>
